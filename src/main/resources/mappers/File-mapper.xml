<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="File">
	
  <insert id="uploadFile" parameterType="com.kedu.project.dto.FilesDTO">
    <selectKey keyProperty="seq" resultType="int" order="BEFORE">
        SELECT FILE_META_SEQ.NEXTVAL FROM dual
    </selectKey>
    INSERT INTO FILE_META (seq, module_type, module_seq, sysname, orgname, contentType)
    VALUES (#{seq}, #{moduleType}, #{module_seq}, #{sysname}, #{orgname}, #{contentType})
  </insert>

  <select id="downloadFile" resultType="com.kedu.project.dto.FilesDTO">
    SELECT * FROM FILE_META WHERE sysname = #{sysname}
  </select>
  
  <select id="getFilesList" resultType="com.kedu.project.dto.FilesDTO">
    SELECT * FROM FILE_META WHERE module_type = #{moduleType} AND module_seq = #{module_seq}
  </select>

  <delete id="deleteFile">
    DELETE FROM FILE_META WHERE sysname = #{sysname}
  </delete>
	
</mapper>